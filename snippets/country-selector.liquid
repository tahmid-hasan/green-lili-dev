{% comment %} <link rel="stylesheet" href="{{ 'component-country-flag.css' | asset_url }}" media="print" onload="this.media='all'"> {% endcomment %}
<style>
  .f-country-flags {
    --flag-size: 2rem;
    background-image: var(--background-image);
    width: var(--flag-size);
    height: var(--flag-size);
    flex-shrink: 0;
    display: inline-block;
    border-radius: 50%;
    background-size: cover;
    background-position: center;
    position: relative;
  }
  .f-country-flags::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: inset 0 0 0.2rem rgba(var(--color-foreground), 0.3);
    border-radius: 50%;
  }
</style>
{% if localization.available_countries.size > 1 %}
  {% liquid
    unless form_id
      assign random_number = 'now' | date: '%N' | modulo: 10 | plus: 25
      assign form_id = 'country-' | append: random_number
      assign noscript_form_id = form_id | append: '_NoScript'
    endunless
  %}
  <div class="country-switcher {{ class }}" style="--f-max-width: 220px">
    <noscript>
      {%- form 'localization', class: 'selectors-form', id: noscript_form_id -%}
        <h2 class="visually-hidden" id="CountryLabelNoScript-{{ form_id }}">
          {{- 'localization.country_label' | t -}}
        </h2>
        <div class="form-group">
          <select
            class="localization-selector form-control{% if plain == true %} form-control--plain{% endif %}"
            name="country_code"
            aria-labelledby="CountryLabelNoScript-{{ form_id }}"
          >
            {%- for country in localization.available_countries -%}
              <option
                value="{{ country.iso_code }}"
                {% if country.iso_code == localization.country.iso_code %}
                  selected
                {% endif %}
              >
                {{ country.name }} ({{ country.currency.iso_code }}
                {{ country.currency.symbol }})
              </option>
            {%- endfor -%}
          </select>
          <button class="btn btn--with-icon btn--square" aria-label="{{ 'localization.update_country' | t }}">
            {% render 'icon-caret' %}
            <span class="visually-hidden">{{ 'localization.update_country' | t }}</span>
          </button>
        </div>
      {%- endform -%}
    </noscript>

    <button
      type="button"
      class="btn--plain text-normal font-body"
      aria-expanded="false"
      aria-controls="LocalizationDrawer"
      aria-describedby="CountryLabel-{{ form_id }}"
      data-disclosure-toggle
    >
      <span
        class="f-country-flags f-country-flags--{{ localization.country.iso_code }}"
        style="--background-image: url({{ localization.country | image_url: width: 20 }})"
      ></span>
      {{ localization.country.name }} ({{ localization.country.currency.iso_code }}
      {{ localization.country.currency.symbol }})
      {% render 'icon-caret' %}
    </button>
  </div>
{% endif %}
